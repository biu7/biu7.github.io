Title: [读书笔记]Redis实战-Redis简介
Date: 2017-12-04
Category: 杂项
Slug: redis_introduction
Authors: qi
Summary: Redis 简介


#### redis简介
redis是一个内存数据库，它提供了多种（书中是五种，但由于redis版本的更新，在后续版本中又添加了几个类型）不同的不同类型的数据结构，来帮助用户解决问题。另一方面，redis又是一个非关系型数据库，也就是说，与mysql、sqlserver这些我们熟知的关系型数据库不同，它不会去预定义或者要求用户对数据库中存储的不同数据进行关联。

以下是redis与其他几种主流数据库的对比，可以根据自己的需要决定是否使用redis或是其它数据库：

| 名称 | 类型 | 数据库存储选项 | 查询类型 | 附加功能 |
| ------ | ------ | ------ | ------| ---------|
| redis | 使用内存存储（in-memory）的非关系型数据库 | 字符串、列表、集合、散列表、有序集合 | 每种数据类型都有自己的专属命令，另外还有批量操作（bulk operation）和不完全（partial）的事务支持| 发布和订阅，主从复制，持久化，脚本|
| memcached | 使用内存存储的键值缓存 | 键值之间的映射 |创建、读取、更新、删除和其他几个命令| 为提升性能而设的多线程服务器|
| MySQL | 关系数据库 | 每个数据库可以包含多个表，每个表可以包含多行；可以处理多个表的视图；支持空间和第三方扩展 |SELECT、INSERT、UPDATE、DELETE、函数、存储过程|支持ACID性质（需要使用InnoDB），主从复制和主主复制|
| PostgreSQL | 关系数据库 | 每个数据库可以包含多个表，每个表可以包含多行；可以处理多个表的视图；支持空间和第三方扩展；支持可定制类型 | SELECT、INSERT、UPDATE、DELETE、函数、自定义的存储过程| 支持ACID性质，主从复制，由第三方支持的多主复制|
| MongoDB | 使用硬盘存储的非关系文档存储 | 每个数据库可以包含多个表，每个表可以包含多个无schema的BSON文档 | 创建、读取、更新、删除、条件查询等| 支持map-reduce操作，主从复制，分片，空间索引|

#### 数据结构简介
如前表所示，redis可以存储键与五种不同的数据结构之间的映射，这五种数据结构分别为STRING（字符串）、LIST（列表）、SET（集合）、HASH（散列）和ZSET（有序集合），他们都有各自的专属命令和一些通用的命令，以后会详细讲解。

下表是对几种数据结构的简单介绍：

| 结构类型 | 结构存储的值 | 结构的读写能力 |
| ------ | ------ | ------ |
| STRING | 字符串、整数或者浮点数 |对整个字符串或者字符串的其中一部分执行操作；对整数和浮点数执行自增减操作| 
| LIST | 一个链表，链表上的每个节点都包含了一个字符串 |从链表的两端推入或弹出元素；根据偏移值对链表进行修剪；读取单个或多个元素；根据值查找或移除元素|
| SET | 包含字符串的无序收集器，并且被包含的每个字符串都各不相同 | 添加、获取、移除单个元素；检查一个元素是否存在与集合中；计算交集、并集、差集；从集合中随机获取元素 |
| HASH | 包含键值对的无序散列表 | 添加、获取、移除单个键值对；获取所有键值对 | 
| ZSET | 字符串成员与浮点数分值之间的有序映射，元素的排列顺序根据分支大小而定 | 添加、获取、删除单个元素；根据分值范围或者成员来获取元素 | 

#### STRING
redis中的字符串与其他编程语言中的字符串十分类似。字符串最常用的命令有三个，GET、SET、DEL，如下表，其余命令将在以后介绍：

| 命令 | 行为 |例子|
| --- | --- | --- |
| SET | 设置存储在给定键中的值| set hello world |
| GET | 获取存储在给定键中的值| get hello |
| DEL | 删除存储在给定键中的值（这个命令适用于所有的数据类型）| del hello |

#### LIST
redis列表可执行的操作和很多编程语言中列表的操作很类似，LPUSH和RPUSH分别将元素推入列表的左端和右端，LPOP和RPOP分别将元素从列表的左端和右端弹出，LINDEX用于获取列表给定位置上的一个元素，LRANGE用于获取列表在给定范围上的所有元素：

| 命令 | 行为 |例子|
| --- | --- | --- |
| LPUSH | 从列表左端推入指定元素 | LPUSH list-key item1 |
| LPOP | 从列表左端弹出元素| LPOP list-key |
| LINDEX | 获取列表指定位置的单个元素 | LINDEX list-key 1 |
| LRANGE | 获取列表在给定范围的所有元素 | LRANGE list-key 0 5 |

#### 集合
redis的集合和列表可以存储多个字符串，他们的不同在于，列表可以存储多个相同的字符串，且它们都是有序的，而集合存储的元素都是无序的，并且它通过散列表来保证自己存储的每个字符串都是各不相同的。

| 命令 | 行为 |例子|
| --- | --- | --- |
| SADD | 添加元素到集合 | SADD set-key item |
| SMEMBERS | 获取集合所有元素| SMEMBERS set-key |
| SISMEMBER | 检查元素是否存在于集合中 | SISMEMBER set-key item |
| SREM | 如果给定元素存在于集合中，则删除元素 | SREM set-key item |

#### 散列

redis的散列可以存储多个键值对之间的映射，与字符串相同，散列存储的值即可以是字符串又可以是数字值，并且用户可以对散列存储的数字值执行自增或自减操作。

| 命令 | 行为 |例子|
| --- | --- | --- |
| HSET | 在散列里关联给定的键值对 | HSET hash-key sub-key1 value1 |
| HGET | 获取指定散列键的值| HGET hash-key sub-key1 |
| HGETALL | 获取散列包含的所有键值对 | HGETALL hash-key |
| HDEL | 如果给定键存在于散列中，则移除这个键 | HDEL hash-key sub-key1 |

#### 有序集合

有序集合和散列一样用于存储键值对，有序集合的键称为成员，每个成员都是个不相同的；有序集合的值称为分值，分值必须为浮点数。有序集合即可以根据成员（即键）访问元素，又可以根据分值以及分值的排列顺序来访问元素。

| 命令 | 行为 |例子|
| --- | --- | --- |
| ZADD | 将一个带有给定分值的成员添加进有序集合 | ZADD zset-key 728 member1 |
| ZRANGE |根据元素在有序排列中所出的位置，从有序集合中获取多个元素| ZRANGE zset-key 0 5 withscores |
| ZRANGEBYSCORE | 获取有序集合再给定分值范围内的所有元素 | ZRANGEBYSCORE zset-key 0 800 |
| ZREM | 如果给定成员存在于有序集合中，则移除这个成员 | ZREM zset-key member1 |
